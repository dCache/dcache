<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
">

    <import resource="nfsv41-common.xml" />
    <bean id="gss" class="org.dcache.xdr.gss.GssSessionManager" >
        <constructor-arg ref="id-mapper" />
    </bean>

    <bean id="door" class="org.dcache.chimera.nfsv41.door.NFSv41Door"
        init-method="init" destroy-method="destroy" depends-on="rpcbind">
        <description>dCache implementation of NFSv4.1 MDS (door, gss)</description>
        <property name="poolManagerStub" ref="poolManagerStub"/>
        <property name="billingStub" ref="billing-stub"/>
        <property name="pnfsHandler" ref="pnfs"/>
        <property name="fileSystemProvider" ref="fileSystem"/>
        <property name="ioQueue" value="${nfs.mover.queue}" />
        <property name="exportFile" ref="export" />
        <property name="idMapper" ref="id-mapper" />
        <property name="portNumber" value="${nfs.net.port}" />
        <property name="enableV3" value="#{ '${nfs.version}' == '3+4.1'}"/>
        <property name="gssSessionManager" ref="gss" />
    </bean>

</beans>
