<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

  <bean id="properties" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <description>Imported configuration data</description>
    <property name="location" value="arguments:"/>
  </bean>

  <bean id="login-stub" class="org.dcache.cells.CellStub">
    <description>Login serviceunication stub</description>
    <property name="destination" value="${dcache.service.gplazma}"/>
    <property name="timeout"     value="30000"/>
  </bean>

  <bean id="login-strategy" class="org.dcache.auth.UnionLoginStrategy">
    <description>Processes login requests</description>
    <property name="loginStrategies">
      <list>
        <bean class="org.dcache.services.login.RemoteLoginStrategy">
          <property name="cellStub" ref="login-stub"/>
        </bean>
      </list>
    </property>
    <property name="anonymousAccess" value="NONE"/>
  </bean>

  <bean id="shell-factory" class="org.dcache.services.ssh2.CommandFactory">
    <property name="historyFile" value="${adminHistoryFile}"/>
    <property name="useColor" value="${admin.colors.enable}"/>
  </bean>

  <bean id="ssh2Server" class="org.dcache.services.ssh2.Ssh2Admin">
    <property name="port"               value="${admin.ssh2AdminPort}"/>
    <property name="hostKeyPrivate"     value="${admin.dsaHostKeyPrivate}"/>
    <property name="hostKeyPublic"      value="${admin.dsaHostKeyPublic}"/>
    <property name="authorizedKeyList"  value="${admin.authorizedKey2}"/>
    <property name="loginStrategy"      ref="login-strategy"/>
    <property name="adminGroupId"       value="${admin.ssh2.gid}"/>
    <property name="serverShellFactory" ref="shell-factory"/>
  </bean>
</beans>
