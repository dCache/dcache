<!-- $Id: infoProvider-build.xml,v 1.5 2006-09-04 15:14:39 tigran Exp $ -->

<project name="infoProvider" default="help" basedir=".">

    <property name="infoprovider.build.dir" location="${buildDir}/infoprovider" />

    <!-- destDir will be used by the copylibs target to get the external lib files to a central place -->

    <!-- internal properties and paths -->
    <property name="infoProvider.jar" location="${classesDir}/infoDynamicSE.jar" />

    <!-- Classpath for infoProvider.jar -->

    <path id="infoprovider.classpath">
        <pathelement location="${classesDir}/cells.jar" />
        <pathelement location="${classesDir}/dcache.jar" />
        <pathelement location="${libDir}/jclarens/clarens-discovery.jar" />
        <fileset dir="${axis.untared}" includes="**/*.jar" excludes="**/log4j-*.jar"/>
        <fileset dir="${libDir}/log4j" includes="*.jar" />
    </path>

    <!--
          Build infoProvider
  -->

    <target name="-infoProvider.compile">

        <mkdir dir="${infoprovider.build.dir}" />

        <javac destdir="${infoprovider.build.dir}" classpathref="infoprovider.classpath" source="${javac.source}" target="${javac.target}" debug="${javac.debug}" verbose="${javac.verbose}">
            <src path="${infoprovider.src}" />
        </javac>

    </target>

    <target name="-infoProvider.jar" depends="-infoProvider.compile">

        <jar jarfile="${infoProvider.jar}">
            <fileset dir="${infoprovider.build.dir}" includes="**/*.class" />
            <manifest>
                <attribute name="Main-Class" value="infoDynamicSE.InfoProvider" />
                <section name="Shared">
                    <attribute name="Title" value="dCache Core" />
                    <attribute name="Vendor" value="dCache.ORG" />
                    <attribute name="Date" value="${jar.timestamp}" />
                </section>
                <section name="Copyright">
                    <attribute name="Copy" value="(C) dCache.ORG  2000 - 2006" />
                </section>
            </manifest>
        </jar>

    </target>


    <target name="-infoProvider.bin" depends="-infoProvider.jar">

        <mkdir dir="${server.bin.dir}/classes" />
        <mkdir dir="${server.bin.dir}/config" />

        <!-- jar file  -->
        <copy file="${infoProvider.jar}" todir="${server.bin.dir}/classes" />

    </target>



</project>
